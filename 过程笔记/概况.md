### 简书画像分析

##### 一、采集用户文章数据

1.获取文章数据程序



2.文章数据存入 mongoDB 数据库

数据库集合表设计

jianshu_huaxiang	=> 存放给集合表的 数据库

site 集合表	=> 存放已获取到文章的集合表  一个用户一个文档，一个文档里包含6个字段

用户文档结构：

​						_id: 随机分配；不指定

​						'gender': '用户性别'

​						'nickname': '用户姓名'

​						'user_homepage': '用户主页'

​						'user_article':  [[{'title':'文章标题'}, {'content': '文章内容'}], [], [],……]

​						 'user_allarticle':  '用户的所有文章的'



##### 二、用户文章数据分析

1.统计每个用户的前100个常用词（collection.counter() 统计词频并保留个分词的次数值）

1-1.统计用户每篇文章的常用词（先用jieba库分词，再使用统计 collection.counter() 词频）

```python
collection.counter()
```

2.把数据库内每位用户常用词汇总起来，再次统计常用词的词频 => 形成简书用户的常用词

##### 三、准备一个爱好词典（hobby.txt 个数约200个）

根据每位用户的常用词，结合已准备好的爱好字典匹配、统计词频，得出简书用户爱好排行榜



##### 四、使用正则表达式编译规则,查询数据库里每位用户的书籍名、电影电视剧名（假定书籍名、电影电视剧名都以 《》书名号包裹 具体参考  TopVideo_books.py 文件 ）[TopVideo_books.py 里 获取出现次数最多的前100个视频名字 的方法可进一步优化]



##### 五、准备一个近年来的电影、电视剧名字的大字典（获取了80s 网的电影名约18000个、电视剧名字约9100个；合并为video_name.txt 文件，个数约27000）



##### 六、结合第四、第五步的步骤匹配、统计词频，得出简书用户喜爱书籍排行榜、电视电影排行榜



##### 七、用户画像

1.简书用户的整体画像

​	1-1. 前num个用户（包括标注性别和未标注性别的  [ 三个饼图 ]）

2.以性别划分用户画像

​	2-1.简书女性用户画像

​			A.前15个爱好

​			B. 词云图(wordCloud [包含常用词、电影电视剧名字])



​	2-2.简书男性用户画像

​			A.前15个爱好

​			B. 词云图(wordCloud [包含常用词、电影电视剧名字])



3.简书单个用户画像（分两种情况）

​	(**实施步骤：**

​	如果数据库里没有此用户的文章，根据 user_homepage 调取先前的爬取文件 获取用户的文章并传入数据库；

​	如果数据库里有此用户的文章, 直接调取数据里的记录数据。)



​	A.前15个爱好

​	B. 词云图(wordCloud [包含常用词、电影电视剧名字])

